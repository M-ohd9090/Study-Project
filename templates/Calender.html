<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Study Calendar</title>
  
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 20px;
      background: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f') no-repeat center center/cover;
      color: #333;
      transition: background 0.5s, color 0.5s;
    }

    .calendar-container {
      max-width: 750px;
      margin: auto;
      padding: 25px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      color: #fff;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .date {
      padding: 15px;
      text-align: center;
      cursor: pointer;
      border-radius: 12px;
      transition: 0.3s ease;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(6px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .date:hover {
      background: rgba(30,136,229,0.3);
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(30,136,229,0.6);
    }

    .date.has-task {
      background: rgba(76,175,80,0.3);
      font-weight: bold;
      box-shadow: 0 0 12px rgba(76,175,80,0.6);
    }

    #task-section {
      margin-top: 20px;
    }

    #task-input {
      padding: 10px;
      width: 60%;
      border-radius: 6px;
      border: none;
    }

    button {
      padding: 10px 18px;
      margin-top: 10px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background: linear-gradient(45deg, #1e88e5, #42a5f5);
      color: white;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: 0.3s;
    }

    button:hover {
      background: linear-gradient(45deg, #1565c0, #1e88e5);
      box-shadow: 0 6px 15px rgba(30,136,229,0.6);
      transform: translateY(-2px);
    }

    #dark-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 18px;
      border-radius: 10px;
      background: #ffcc00;
      border: none;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }

    body.dark-mode {
      background: #111 url('https://images.unsplash.com/photo-1526481280695-3c720685208b') no-repeat center center/cover;
      color: #eee;
    }

    body.dark-mode .calendar-container {
      background-color: rgba(0,0,0,0.6);
      color: #eee;
    }

    body.dark-mode .date {
      background: rgba(255,255,255,0.1);
      color: #eee;
    }

    #progress-bar {
      width: 100%;
      height: 12px;
      background: rgba(255,255,255,0.2);
      margin-top: 15px;
      border-radius: 6px;
      overflow: hidden;
    }

    #progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #4caf50, #81c784);
      border-radius: 6px;
      transition: 0.3s ease;
    }

    li {
      margin: 5px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    header.topbar {
      background: rgba(0,0,0,0.8);
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    header.topbar a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header class="topbar">
    <nav class="top-links">
      <a href="Dashboard.html">⬅ Back to Dashboard</a>
    </nav>
  </header>

  <div class="calendar-container">
    <h1>📅 My Study Calendar</h1>

    <div id="calendar"></div>

    <div id="task-section">
      <h2>Tasks on <span id="selected-date">None</span></h2>
      <ul id="task-list"></ul>

      <input type="text" id="task-input" placeholder="Enter a task..."/>
      <button onclick="addTask()">Add Task</button>

      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
    </div>
  </div>

  <button id="dark-toggle" onclick="toggleDarkMode()">🌗 Toggle Dark Mode</button>

  <script>
    const calendar = document.getElementById('calendar');
    const taskList = document.getElementById('task-list');
    const taskInput = document.getElementById('task-input');
    const selectedDateSpan = document.getElementById('selected-date');

    let selectedDate = null;
    let tasks = JSON.parse(localStorage.getItem('calendarTasks')) || {};

    function renderCalendar() {
      const daysInMonth = 31; // For August
      calendar.innerHTML = '';

      for (let i = 1; i <= daysInMonth; i++) {
        const day = document.createElement('div');
        day.classList.add('date');
        day.innerText = i;

        const dateKey = `2025-08-${String(i).padStart(2, '0')}`;
        if (tasks[dateKey]?.length) {
          day.classList.add('has-task');
        }

        day.onclick = () => {
          selectedDate = dateKey;
          selectedDateSpan.innerText = dateKey;
          displayTasks();
        };

        calendar.appendChild(day);
      }
    }

    function displayTasks() {
      taskList.innerHTML = '';
      const taskArray = tasks[selectedDate] || [];

      taskArray.forEach((task, index) => {
        const li = document.createElement('li');

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = task.done;
        checkbox.onchange = () => toggleTaskDone(index);

        const label = document.createElement('span');
        label.innerText = task.text;
        if (task.done) label.style.textDecoration = 'line-through';

        label.onclick = () => {
          const newText = prompt("Edit your task:", task.text);
          if (newText !== null && newText.trim() !== '') {
            task.text = newText.trim();
            saveTasks();
            displayTasks();
          }
        };

        const deleteBtn = document.createElement('button');
        deleteBtn.innerText = '❌';
        deleteBtn.onclick = () => removeTask(index);

        li.appendChild(checkbox);
        li.appendChild(label);
        li.appendChild(deleteBtn);

        taskList.appendChild(li);
      });

      updateProgressBar();
    }

    function addTask() {
      if (!selectedDate || taskInput.value.trim() === '') return;

      if (!tasks[selectedDate]) {
        tasks[selectedDate] = [];
      }

      tasks[selectedDate].push({ text: taskInput.value.trim(), done: false });
      taskInput.value = '';
      saveTasks();
      renderCalendar();
      displayTasks();
    }

    function removeTask(index) {
      tasks[selectedDate].splice(index, 1);
      saveTasks();
      renderCalendar();
      displayTasks();
    }

    function toggleTaskDone(index) {
      tasks[selectedDate][index].done = !tasks[selectedDate][index].done;
      saveTasks();
      displayTasks();
    }

    function updateProgressBar() {
      const taskArray = tasks[selectedDate] || [];
      const total = taskArray.length;
      const done = taskArray.filter(task => task.done).length;
      const percent = total === 0 ? 0 : (done / total) * 100;
      document.getElementById('progress-fill').style.width = `${percent}%`;
    }

    function saveTasks() {
      localStorage.setItem('calendarTasks', JSON.stringify(tasks));
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    renderCalendar();
  </script>
</body>
</html>
